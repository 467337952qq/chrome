import{b as o,i as u,s as l,a as c,B as m,g as d,c as a,I as f}from"./storage-Bmc69mpr.js";const{version:T}=o.runtime.getManifest();u({release:T,dsn:"https://5d5d74b120ad43fc8d9a4fe1aabc6095@o554592.ingest.sentry.io/4504028522545152"});l("view","background");o.runtime.onInstalled.addListener(e=>{e.reason==="install"&&o.tabs.create({}),c(f,String(Date.now()))});chrome.runtime.onMessage.addListener((e,i,r)=>{switch(e.event){case m.GET_FREQUENT_HISTORY:return h().then(n=>{r(n)}),!0}});async function h(){const e=await new Promise(t=>{chrome.history.search({text:"",maxResults:4e3,startTime:Date.now()-432e6},s=>t(s))}),i=new Map,r={};await d(t=>t.url&&i.set(t.url,t));const n=e.filter(t=>{if(t.url&&t.visitCount&&t.lastVisitTime&&i.has(t.url)){const s=i.get(t.url);return s!=null&&s.id&&(r[s.id]={visitCount:t.visitCount,lastVisit:t.lastVisitTime}),!1}return!t.url||!t.visitCount||!t.title||i.has(t.url)?!1:t.visitCount>10}).sort((t,s)=>a(s.visitCount,s.typedCount,s.lastVisitTime)-a(t.visitCount,t.typedCount,t.lastVisitTime)).slice(0,15);return{histories:e.slice(0,1e3),sortedHistories:n,bookmarkFrequency:r}}
